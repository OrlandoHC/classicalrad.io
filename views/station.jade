extends layout

block content
	h3 #{station.name} 
		span #{station.location}
	audio(src='#{station.stream_url}', type='audio/mp4', controls='controls', id='player')
	div#control
	p#status Loading...
	p.return
		a(href='/') return to list

block js
	script(src='/mediaelement/mediaelement-and-player.min.js')
	script
		MediaElement('player', {
			success: function(me) {
				var control = $('#control');
				var status = $("#status")
				me.play();
				
				control.click(function() {
					if (me.paused)
						me.play();
					else
						me.pause();
				});

				me.addEventListener('play', function() {
					control.addClass('playing');
				}, false);

				me.addEventListener('pause', function() {
					control.removeClass('playing');
				}, false);

				me.addEventListener('timeupdate', function() {
					status.text("Playing for " + Math.round(me.currentTime) + " seconds");
				}, false);				
			}
		});

block head
	link(rel='stylesheet', href='/mediaelement/mediaelementplayer.min.css')

